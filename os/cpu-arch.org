* intel
** 分页
intel 有四种分页模式
#+CAPTION: 不同分页模式的属性
| paging  | CR0 | CR4 | IA32_EFER |  CR4 | Lin-Addr | Phys-Addr | Page Sizes        | Supports        | Supports PCIDs and |
| mode    |  PG | PAE |       LME | LA57 |    Width | Width     |                   | Execute-Disable | protection keys    |
|---------+-----+-----+-----------+------+----------+-----------+-------------------+-----------------+--------------------|
| None    |   0 | N/A |       N/A |  N/A |       32 | 32        | N/A               | No              | No                 |
|---------+-----+-----+-----------+------+----------+-----------+-------------------+-----------------+--------------------|
| 32-bit  |   1 |   0 |         0 |    0 |       32 | Up to 40  | 4KB/4MB           | No              | No                 |
|---------+-----+-----+-----------+------+----------+-----------+-------------------+-----------------+--------------------|
| PAE     |   1 |   1 |         0 |    0 |       32 | Up to 52  | 4KB/2MB           | Yes             | No                 |
|---------+-----+-----+-----------+------+----------+-----------+-------------------+-----------------+--------------------|
| 4-level |   1 |   1 |         1 |    0 |       48 | Up to 52  | 4KB/2MB/1GB       | Yes             | Yes                |
|---------+-----+-----+-----------+------+----------+-----------+-------------------+-----------------+--------------------|
| 5-level |   1 |   1 |         1 |    1 |       57 | Up to 52  | 4KB/2MB/1GB/512GB | Yes             | Yes                |

#+CAPTION: 不同分页模式的结构
| paging structure       | entry | paging mode         | Phys-Addr    | Bits Selecting | Page Mapping          |
|                        | name  |                     | of structure |          Entry |                       |
|------------------------+-------+---------------------+--------------+----------------+-----------------------|
| PML5 table             | PML5E | 32-bit,PAE,4-level  | N/A          |            N/A | N/A                   |
|                        |       | 5-level             | CR3          |          56:48 | N/A(PS must be 0)     |
|------------------------+-------+---------------------+--------------+----------------+-----------------------|
|                        |       | 32-bit,PAE          | N/A          |            N/A | N/A                   |
| PML 4 table            | PML4E | 4-level             | CR3          |          47:39 | N/A(PS must be 0)     |
|                        |       | 5-level             | PML5E        |          47:39 | 512GByte page if PS=1 |
|------------------------+-------+---------------------+--------------+----------------+-----------------------|
| Page-directory-pointer | PDPTE | 32-bit              | N/A          |            N/A | N/A                   |
| table                  |       | PAE                 | CR3          |          31:30 | N/A(PS must be 0)     |
|                        |       | 4-level,5-level     | PML4E        |          38:30 | 1-GByte page if PS=1  |
|------------------------+-------+---------------------+--------------+----------------+-----------------------|
| Page directory         | PDE   | 32-bit              | CR3          |          31:22 | 4-MByte page if PS=1  |
|                        |       | PAE,4-level,5-level | PDPTE        |          29:21 | 2-MByte page if PS=1  |
|------------------------+-------+---------------------+--------------+----------------+-----------------------|
| Page table             | PTE   | 32-bit              | PDE          |          21:12 | 4-KByte page          |
|                        |       | PAE,4-level,5-level |              |          20:12 |                       |


*** TODO execute-disable
*** TODO PCIDs
*** TODO protection keys
